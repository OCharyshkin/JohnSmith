'use strict';var JohnSmith;
(function(c){(function(e){var f=function(){function a(){}a.isFunction=function(a){var b={};return a&&"[object Function]"===b.toString.call(a)};a.isObject=function(a){return null!=a&&"object"===typeof a};return a}();e.TypeUtils=f;f=function(){function a(a){this._processors=a}a.prototype.processArguments=function(a,b){var k=a[a.length-1];this.isOptionsArgument(k)?a.pop():k={};for(var c=0;0<a.length;)this.processHandlerArgument(a[0],c,k,b),a.splice(0,1),c++;return k};a.prototype.processHandlerArgument=function(a,
b,k,c){for(var d=0;d<this._processors.length;d++){var e=this._processors[d];if(e.canProcess(a,b,k,c)){e.process(a,k,c);return}}throw Error("Could not process argument "+a);};a.prototype.isOptionsArgument=function(a){return c.Common.TypeUtils.isObject(a)};return a}();e.ArgumentProcessorsBasedHandler=f;var d=function(){function a(){this._items=[]}a.prototype.getAt=function(a){return this._items[a]};a.prototype.setAt=function(a,b){this._items[a]=b};a.prototype.removeAt=function(a){this._items.splice(a,
1)};a.prototype.insertAt=function(a,b){this._items.splice(a,0,b)};a.prototype.add=function(a){this._items.push(a)};a.prototype.count=function(){return this._items.length};a.prototype.clear=function(){this._items.length=0};return a}();e.ArrayList=d;e.log={info:function(a){},warn:function(a){},error:function(a){}};window.js=window.js||{};e.JS=window.js;f=function(){function a(){this._listeners=new d}a.prototype.addListener=function(a,b){this._listeners.add({eventType:a,callback:b})};a.prototype.trigger=
function(a,b){for(var c=this._listeners.count(),d=0;d<c;d++){var e=this._listeners.getAt(d);e.eventType===a&&e.callback(b)}};return a}();e.JS.event={};e.JS.event.bus=new f;f=function(){function a(){}a.text="text";a.html="html";a.unknown="unknown";return a}();e.ValueType=f;var b=function(){function a(){this.clear()}a.prototype.has=function(a){return null!=this._resolvedDependencies[a]};a.prototype.resolve=function(a){return(a=this._resolvedDependencies[a])?a:null};a.prototype.register=function(a,b){this._resolvedDependencies[a]=
b;this.checkCallbacks()};a.prototype.registerWithDependencies=function(a,b){for(var c=[],d=0;d<arguments.length-2;d++)c[d]=arguments[d+2];this._definitions.push({key:a,dependencies:c,factoryCallback:b});this.checkCallbacks()};a.prototype.withRegistered=function(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];this._definitions.push({dependencies:b,factoryCallback:a});this.checkCallbacks()};a.prototype.clear=function(){this._resolvedDependencies={};this._definitions=[]};a.prototype.checkCallbacks=
function(){var a=!1,b=0,c={};do b>=this._definitions.length&&(a=!0),a||(this.processCallback(this._definitions[b],c)?this._definitions.splice(b,1):b++);while(!a);for(var d in c)this.register(d,c[d])};a.prototype.processCallback=function(a,b){for(var c=[],d=0;d<a.dependencies.length;d++){var e=a.dependencies[d];if(this.has(e))e=this.resolve(e),c.push(e);else return!1}(c=a.factoryCallback.apply(this,c))&&a.key&&(b[a.key]=c);return!0};return a}(),f=new b;e.JS.ioc=f;e.JS.createIocContainer=function(){return new b}})(c.Common||
(c.Common={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(){function a(){}a.Value="value";a.CheckedAttribute="checkedAttribute";return a}();e.FetcherType=f;e=function(){function a(){}a.prototype.isSuitableFor=function(a){var b=a.getNodeName();return b&&(b=b.toUpperCase(),"TEXTAREA"===b||"INPUT"===b&&(a=a.getAttribute("type"),!a||"TEXT"===a.toUpperCase()))?!0:!1};a.prototype.valueToElement=function(a,b){b.setValue(a)};a.prototype.valueFromElement=function(a){return a.getValue()};return a}();var d=function(){function a(){}
a.prototype.isSuitableFor=function(a){var b=a.getNodeName();return b?(b=b.toUpperCase(),a=a.getAttribute("type"),"INPUT"===b&&a&&"CHECKBOX"===a.toUpperCase()):!1};a.prototype.valueToElement=function(a,b){b.setProperty("checked",a)};a.prototype.valueFromElement=function(a){var b=!1;a.getProperty("checked")&&(b=!0);return b};return a}(),b=new (function(){function a(){this._items={}}a.prototype.getForElement=function(a){for(var b in this._items){var c=this._items[b];if(c.isSuitableFor(a))return c}return null};
a.prototype.getByKey=function(a){return this._items[a]};a.prototype.registerFetcher=function(a,b){this._items[a]=b};return a}());b.registerFetcher(f.Value,new e);b.registerFetcher(f.CheckedAttribute,new d);c.Common.JS.ioc.register("fetcherFactory",b)})(c.Fetchers||(c.Fetchers={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){var f=function(){function c(b,a){this._command=b;this._cause=a}c.prototype.init=function(){this._cause.wireWith(this._command)};c.prototype.dispose=function(){this._cause.dispose()};return c}();c.CommandWire=f;f=function(){function c(b,a,g,h){this._causeData=b;this._commandManager=a;this._context=g;this._commandContext=h;this._wires=[]}c.prototype.do=function(b,a){var g=this._commandManager.setUpBinding({command:b,context:this._context,causeData:this._causeData,commandContext:a||
this._commandContext||null});this._wires.push(g);g.init();return this};c.prototype.dispose=function(){for(var b=0;b<this._wires.length;b++)this._wires[b].dispose()};return c}();c.CommandConfig=f})(c.Command||(c.Command={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){(function(c){c[c.replace=0]="replace";c[c.add=1]="add";c[c.remove=2]="remove"})(c.DataChangeReason||(c.DataChangeReason={}));var f=function(){function c(b,a){this._bindable=b;this._handler=a}c.prototype.init=function(){this._handler.wireWith(this._bindable)};c.prototype.dispose=function(){this._handler.unwireWith(this._bindable);this._handler.dispose()};c.prototype.getBindable=function(){return this._bindable};c.prototype.getHandler=function(){return this._handler};return c}();
c.BindingWire=f;f=function(){function c(b,a,g,h){this._manager=b;this._bindable=a;this._context=g;this._commandHost=h;this._wires=[]}c.prototype.to=function(){for(var b=[],a=0;a<arguments.length-0;a++)b[a]=arguments[a+0];b=this._manager.bind({bindableData:this._bindable,handlerData:b,context:this._context,commandHost:this._commandHost});this._wires.push(b);b.init();return this};c.prototype.dispose=function(){for(var b=0;b<this._wires.length;b++)this._wires[b].dispose()};return c}();c.BindingConfig=
f})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(){function d(){this._listeners=new c.Common.ArrayList}d.prototype.getValue=function(){return this._value};d.prototype.setValue=function(b){this.notifyListeners(b,e.DataChangeReason.replace);this._value=b};d.prototype.getState=function(){return this._state};d.prototype.setState=function(b){for(var a=0;a<this._listeners.count();a++)this._listeners.getAt(a).stateChanged(this._state,b);this._state=b};d.prototype.addListener=function(b){this._listeners.add(b)};
d.prototype.removeListener=function(b){for(var a=-1,g=0;g<this._listeners.count();g++)this._listeners.getAt(g)==b&&(a=g);0<=a&&this._listeners.removeAt(a)};d.prototype.getListenersCount=function(){return this._listeners.count()};d.prototype.notifyListeners=function(b,a){for(var g=0;g<this._listeners.count();g++)this._listeners.getAt(g).valueChanged(this._value,b,a)};return d}();e.BindableValue=f;c.Common.JS.bindableValue=function(){return new f}})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith=
{}));var __extends=this.__extends||function(c,e){function f(){this.constructor=c}for(var d in e)e.hasOwnProperty(d)&&(c[d]=e[d]);f.prototype=e.prototype;c.prototype=new f};
(function(c){(function(e){var f=function(c){function b(){c.call(this);c.prototype.setValue.call(this,[])}__extends(b,c);b.prototype.setValue=function(a){if(a&&!(a instanceof Array))throw Error("Bindable list supports only array values");c.prototype.setValue.call(this,a);this.notifyCountListeners()};b.prototype.add=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];for(var b=this.getValue(),c=0;c<a.length;c++)b.push(a[c]);this.reactOnChange(a,e.DataChangeReason.add)};b.prototype.remove=
function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];for(var b=this.getValue(),c=0;c<a.length;c++){for(var k=-1,d=0;d<b.length;d++)b[d]==a[c]&&(k=d);0<=k&&b.splice(k,1)}this.reactOnChange(a,e.DataChangeReason.remove)};b.prototype.count=function(){this._count||(this._count=new e.BindableValue);return this._count};b.prototype.reactOnChange=function(a,b){c.prototype.notifyListeners.call(this,a,b);this.notifyCountListeners()};b.prototype.notifyCountListeners=function(){this._count&&
(this.getValue()?this._count.setValue(this.getValue().length):this._count.setValue(0))};return b}(e.BindableValue);e.BindableList=f;c.Common.JS.bindableList=function(){return new f}})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){var f=function(){function b(a){this._value=a}b.prototype.getValue=function(){return this._value};b.prototype.getState=function(){return"normal"};b.prototype.addListener=function(a){};b.prototype.removeListener=function(a){};return b}();c.StaticBindableValue=f;var d=function(){function b(){}b.prototype.createBindable=function(a){return new f(a)};return b}();c.StaticBindableFactory=d})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(a){function b(c,g,h){a.call(this,h);this._bindableFactories=c;this._handlerFactories=g}__extends(b,a);b.prototype.bind=function(a){c.Common.log.info("Binding ",a.bindableData," to ",a.handlerData);var b=this.getBindable(a.bindableData);a=this.getHandler(a.handlerData,b,a.context,a.commandHost);c.Common.log.info("    resolved bindable: ",b);c.Common.log.info("    resolved handler: ",a);return new e.BindingWire(b,a)};b.prototype.getBindable=function(a){for(var b=
0;b<this._bindableFactories.count();b++){var c=this._bindableFactories.getAt(b).createBindable(a);if(null!=c)return c}throw Error("Could not transform object "+a+" to bindable");};b.prototype.getHandler=function(a,b,c,g){for(var h=this.processArguments(a,c),d=0;d<this._handlerFactories.count();d++){var k=this._handlerFactories.getAt(d).createHandler(h,b,c,g);if(k)return k}throw Error("Could not transform object "+a+" to bindable handler");};return b}(c.Common.ArgumentProcessorsBasedHandler);e.DefaultBindingManager=
f;var d=function(){function a(){}a.prototype.createBindable=function(a){return a&&a.getValue&&a.addListener?a:null};return a}(),b=new c.Common.ArrayList,a=new c.Common.ArrayList,g=[];c.Common.JS.getBindableFactories=function(){return b};c.Common.JS.getHandlerFactories=function(){return a};c.Common.JS.addBindableFactory=function(a){b.add(a)};c.Common.JS.addHandlerFactory=function(b){a.insertAt(0,b)};c.Common.JS.addHandlerArgumentProcessor=function(a){g.push(a)};c.Common.JS.addBindableFactory(new d);
c.Common.JS.addBindableFactory(new e.StaticBindableFactory);c.Common.JS.addHandlerFactory({createHandler:function(a,b){return a&&a.wireWith&&a.unwireWith?a:null}});var h=new f(b,a,g);c.Common.JS.ioc.register("bindingManager",h);c.Common.JS.bind=function(a){return new e.BindingConfig(h,a,null,c.Common.JS)}})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(){function a(a,b,c,d){this._targetElement=a;this._event=b;this._commandContext=c;this._argumentsFetcher=d}a.prototype.wireWith=function(a){var b=this._commandContext,c=this._argumentsFetcher;this._handlerRef=this._targetElement.attachEventHandler(this._event,function(d){d=null==c?[]:c.fetch(d);a.execute.apply(b,d)})};a.prototype.dispose=function(){this._targetElement.detachEventHandler(this._event,this._handlerRef)};return a}();e.EventCommandCause=f;var d=
function(){function a(a){this._fetcher=a}a.prototype.fetch=function(a){return[this._fetcher.valueFromElement(a)]};return a}(),b=function(a){function b(c,g,d){a.call(this,c);this._elementFactory=g;this._fetcherFactory=d}__extends(b,a);b.prototype.setUpBinding=function(a){var b=this.getCommand(a.command);a.commandContext||(a.commandContext=b);a=this.getCause(a.causeData,a.context,a.commandContext);return new e.CommandWire(b,a)};b.prototype.getCommand=function(a){if(c.Common.TypeUtils.isFunction(a))return{execute:a};
if(a.execute)return a;throw Error("Could not transform "+a+" to command object");};b.prototype.getCause=function(a,b,c){a=this.processArguments(a,b);return this.getCauseByOptions(a,b,c)};b.prototype.getCauseByOptions=function(a,b,c){if(!a.to)throw Error("Required option 'to' is not set!");if(!a.event)throw Error("Required option 'event' is not set!");b=null==b?this._elementFactory.createElement(a.to):b.findRelative(a.to);if(!a.argumentsFetcher){var g=null;if(g=a.fetch?this._fetcherFactory.getByKey(a.fetch):
this._fetcherFactory.getForElement(b))a.argumentsFetcher=new d(g)}return new f(b,a.event,c,a.argumentsFetcher)};return b}(c.Common.ArgumentProcessorsBasedHandler);e.DefaultCommandManager=b})(c.Command||(c.Command={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(){function b(){}b.prototype.canProcess=function(a,b,c,d){return"string"==typeof a&&1==b};b.prototype.process=function(a,b,c){b.event=a};return b}(),d=[];c.Common.JS.ioc.registerWithDependencies("commandManager",function(b,a){return new e.DefaultCommandManager(d,b,a)},"elementFactory","fetcherFactory");c.Common.JS.on=function(){for(var b=[],a=0;a<arguments.length-0;a++)b[a]=arguments[a+0];a=c.Common.JS.ioc.resolve("commandManager");return new e.CommandConfig(b,
a,null)};c.Common.JS.addCommandCauseArgumentProcessor=function(b){d.push(b)};c.Common.JS.addCommandCauseArgumentProcessor(new f)})(c.Command||(c.Command={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(){function b(a){this._target=a}b.prototype.isEmpty=function(){return 0==this._target.length};b.prototype.empty=function(){this._target.empty()};b.prototype.appendHtml=function(a){if(!a)throw Error("Could not append empty string!");if("string"!==typeof a)throw Error("Expected string markup but was"+a);a=$($.parseHTML(a));this._target.append(a);return new b(a)};b.prototype.appendText=function(a){if(void 0===a||null==a)throw Error("Could not append empty string!");
if("string"!==typeof a)throw Error("Expected string text but was"+a);if(""===a)return this.getTarget().empty(),this;a=$("<div/>").text(a).html();return this.appendHtml(a)};b.prototype.getHtml=function(){return this._target.html()};b.prototype.getNodeName=function(){return 1==this._target.length?this._target[0].nodeName:null};b.prototype.findRelative=function(a){var c=this._target.filter(a);0==c.length&&(c=this._target.find(a));return new b(c)};b.prototype.remove=function(){this._target.remove()};
b.prototype.getTarget=function(){return this._target};b.prototype.setText=function(a){this._target.text(a)};b.prototype.setHtml=function(a){this._target.html(a)};b.prototype.addClass=function(a){this._target.addClass(a)};b.prototype.removeClass=function(a){this._target.removeClass(a)};b.prototype.attachClickHandler=function(a){this._target.click(a)};b.prototype.attachEventHandler=function(a,c){var h=function(){c(new b($(this)));return!1};this._target.on(a,h);return h};b.prototype.detachEventHandler=
function(a,b){this._target.off(a,b)};b.prototype.getValue=function(){return this._target.val()};b.prototype.setValue=function(a){return this._target.val(a)};b.prototype.getAttribute=function(a){return this._target.attr(a)};b.prototype.setAttribute=function(a,b){this._target.attr(a,b)};b.prototype.getProperty=function(a){return this._target.prop(a)};b.prototype.setProperty=function(a,b){this._target.prop(a,b)};return b}(),d=function(){function b(){}b.prototype.resolve=function(a){var b=a instanceof
jQuery?a:$(a);if(0<b.parent().length)return b.html();if("string"===typeof a)return a;if(a instanceof jQuery)return $("<p>").append(a).html();throw Error("Could not resolve markup by object "+a);};return b}();e.JQueryMarkupResolver=d;e=function(){function b(){}b.prototype.canProcess=function(a,b,c,d){return"string"==typeof a&&0==b};b.prototype.process=function(a,b,c){b.to||(b.to=a)};return b}();c.Common.JS.ioc.register("elementFactory",{createElement:function(b){return new f($(b))},createRelativeElement:function(b,
a){}});c.Common.JS.addHandlerArgumentProcessor(new e);c.Common.JS.addCommandCauseArgumentProcessor(new e);c.Common.JS.ioc.register("markupResolver",new d)})(c.JQuery||(c.JQuery={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(){function c(b){this._callback=b}c.prototype.wireWith=function(b){b.addListener(this)};c.prototype.unwireWith=function(b){b.removeListener(this)};c.prototype.valueChanged=function(b,a,c){this._callback.call(window,a,b,c)};c.prototype.dispose=function(){};return c}();e.CallbackHandler=f;e=function(){function d(){}d.prototype.canProcess=function(b,a,g,h){return 0==a&&(null==g.handler||"callback"==g.handler)&&null==g.callback&&c.Common.TypeUtils.isFunction(b)};
d.prototype.process=function(b,a,c){a.handler="callback";a.callback=b};return d}();c.Common.JS.addHandlerArgumentProcessor(new e);c.Common.JS.addHandlerFactory({createHandler:function(c,b){return c&&"callback"===c.handler?new f(c.callback):null}})})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(){function d(b,a,c,h,d,e,f,m){this._bindableManager=b;this._commandManager=a;this._elementFactory=c;this._data=h;this._viewModel=d;this._eventBus=e;this._viewFactory=f;this._markupResolver=m;this._bindings=[];this._commands=[]}d.prototype.addChild=function(b,a,c){this.hasChildren()||(this._children=[]);this._children.push({child:a,destination:b,viewModel:c})};d.prototype.renderTo=function(b){var a=this._markupResolver.resolve(this._data.template);this._rootElement=
("string"==typeof b?this._elementFactory.createElement(b):b).appendHtml(a);this._eventBus.trigger("viewRendered",{root:this._rootElement,view:this});this._data.init&&this._data.init.call(this,this._viewModel);if(this.hasChildren())for(b=0;b<this._children.length;b++)a=this._children[b],this._viewFactory.resolve(a.child,a.viewModel).renderTo(this._rootElement.findRelative(a.destination));this._viewModel&&this._viewModel.resetState&&this._viewModel.resetState()};d.prototype.bind=function(b){b=new c.Binding.BindingConfig(this._bindableManager,
b,this._rootElement,this);this._bindings.push(b);return b};d.prototype.on=function(){for(var b=[],a=0;a<arguments.length-0;a++)b[a]=arguments[a+0];b=new c.Command.CommandConfig(b,this._commandManager,this.getRootElement(),this._viewModel);this._commands.push(b);return b};d.prototype.getRootElement=function(){return this._rootElement};d.prototype.dispose=function(){if(this.hasChildren())for(var b=0;b<this._children.length;b++)this._children[b].child.dispose();for(b=0;b<this._bindings.length;b++)this._bindings[b].dispose();
for(b=0;b<this._commands.length;b++)this._commands[b].dispose()};d.prototype.hasChildren=function(){return null!=this._children};return d}();e.DefaultView=f})(c.View||(c.View={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(){function d(b,a,c,h,d){this._bindableManager=b;this._commandManager=a;this._elementFactory=c;this._eventBus=h;this._markupResolver=d}d.prototype.resolve=function(b,a){if(!b)throw Error("Expected view data object was not defined");if(c.Common.TypeUtils.isFunction(b)){var g=new b;return this.resolve(g,a)}if(b.template)return new e.DefaultView(this._bindableManager,this._commandManager,this._elementFactory,b,a,this._eventBus,this,this._markupResolver);if(b.renderTo&&
b.getRootElement)return b;throw Error("Could not resolve view data by provided descriptor");};return d}();e.DefaultViewFactory=f})(c.View||(c.View={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(){function b(a){this._viewFactory=a}b.prototype.canProcess=function(a,b,c,d){return 1===b&&!c.view};b.prototype.process=function(a,b,c){try{this._viewFactory.resolve(a,null),b.view=a}catch(d){}};return b}();e.ViewArgumentProcessor=f;var d=function(){function b(a,b){this._viewFactory=a;this._viewDescriptor=b}b.prototype.render=function(a,b){var c=this._viewFactory.resolve(this._viewDescriptor,a);c.renderTo(b);return{element:c.getRootElement(),dispose:function(){c.dispose()}}};
return b}();e.ViewValueRenderer=d;c.Common.JS.ioc.registerWithDependencies("viewFactory",function(b,a,g,d){return new e.DefaultViewFactory(b,a,g,c.Common.JS.event.bus,d)},"bindingManager","commandManager","elementFactory","markupResolver");c.Common.JS.ioc.withRegistered(function(b){c.Common.JS.addHandlerArgumentProcessor(new f(b))},"viewFactory");c.Common.JS.createView=function(b,a){return c.Common.JS.ioc.resolve("viewFactory").resolve(b,a)}})(c.View||(c.View={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(c){var f=function(){function b(a){this._formatter=a}b.prototype.render=function(a,b){var c=this._formatter.format(a);return{element:this.doRender(c,b)}};b.prototype.doRender=function(a,b){return null};return b}();c.RendererBase=f;var d=function(b){function a(a){b.call(this,a)}__extends(a,b);a.prototype.doRender=function(a,b){return b.appendText(a)};return a}(f);c.TextRenderer=d;d=function(b){function a(a){b.call(this,a)}__extends(a,b);a.prototype.doRender=function(a,b){return b.appendHtml(a)};
return a}(f);c.HtmlRenderer=d;f=function(b){function a(a,c){b.call(this,a);this._markupResolver=c}__extends(a,b);a.prototype.doRender=function(a,b){var c=this._markupResolver.resolve(a);return b.appendHtml(c)};return a}(f);c.ResolvableMarkupRenderer=f;f=function(){function b(a){this._fetcher=a}b.prototype.render=function(a,b){this._fetcher.valueToElement(a,b);return{element:b}};return b}();c.FetcherToRendererAdapter=f})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(){function a(b,c){this._contentDestination=b;this._valueRenderer=c}a.prototype.wireWith=function(a){this.doRender(a.getValue());a.addListener(this)};a.prototype.unwireWith=function(a){a.removeListener(this)};a.prototype.valueChanged=function(a,b,c){this.doRender(b)};a.prototype.stateChanged=function(a,b){};a.prototype.dispose=function(){this.disposeCurrentValue()};a.prototype.doRender=function(a){this.disposeCurrentValue();this._contentDestination.empty();
null!==a&&void 0!==a&&(this._currentValue=this._valueRenderer.render(a,this._contentDestination))};a.prototype.disposeCurrentValue=function(){this._currentValue&&this._currentValue.dispose&&this._currentValue.dispose()};return a}();e.RenderValueHandler=f;var d=function(){function b(a,c,d,e){this._destinationFactory=a;this._markupResolver=c;this._viewFactory=d;this._fetcherFactory=e}b.prototype.fillContentDestination=function(a,b){a.contentDestination||(a.contentDestination=null==b?this._destinationFactory.createElement(a.to):
b.findRelative(a.to))};b.prototype.fillRenderer=function(b,d,e){if(!b.renderer)if(b.view)b.renderer=new c.View.ViewValueRenderer(this._viewFactory,b.view);else{if(!b.valueType){var g=!0;void 0!==b.encode&&(g=b.encode);b.valueType=g?c.Common.ValueType.text:c.Common.ValueType.html}b.formatter||(b.formatter=new a);b.renderer=this.getRenderer(b,d,e)}};b.prototype.getRenderer=function(a,b,d){var g=null;if(a.fetch){if(g=this._fetcherFactory.getByKey(a.fetch),!g)throw Error("Fetcher "+a.fetch+" not found");
}else g=this._fetcherFactory.getForElement(a.contentDestination);if(g){if(!1!==a.bidirectional){var f=a.command,l=a.commandContext,n=a.event||"change";!f&&d.setValue&&(f=d.setValue,l=d);f&&b.on(a.to,n).do(f,l)}return new e.FetcherToRendererAdapter(g)}switch(a.valueType){case c.Common.ValueType.text:return new e.TextRenderer(a.formatter);case c.Common.ValueType.html:return new e.HtmlRenderer(a.formatter);case c.Common.ValueType.unknown:return new e.ResolvableMarkupRenderer(a.formatter,this._markupResolver);
default:throw Error("Unknown value type: "+a.valueType);}};b.prototype.isList=function(a){return a instanceof e.BindableList||a&&a.getValue()instanceof Array?!0:!1};return b}();e.RenderHandlerFactoryBase=d;var b=function(a){function b(c,d,e,f){a.call(this,c,d,e,f)}__extends(b,a);b.prototype.createHandler=function(a,b,c,d){if(!a||a.handler&&"render"!==a.handler||a.type&&"value"!==a.type||!a.type&&this.isList(b))return null;this.fillContentDestination(a,c);this.fillRenderer(a,d,b);return new f(a.contentDestination,
a.renderer)};return b}(d);e.RenderValueFactory=b;var a=function(){function a(){}a.prototype.format=function(a){return a.toString()};return a}();e.DefaultFormatter=a;c.Common.JS.ioc.withRegistered(function(a,d,e,f){c.Common.JS.addHandlerFactory(new b(a,d,e,f))},"elementFactory","markupResolver","viewFactory","fetcherFactory")})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(){function b(a,b){this._contentDestination=a;this._valueRenderer=b;this._renderedValues=[]}b.prototype.wireWith=function(a){this.doRender(a.getValue(),e.DataChangeReason.replace);a.addListener(this)};b.prototype.unwireWith=function(a){a.removeListener(this)};b.prototype.valueChanged=function(a,b,c){this.doRender(b,c)};b.prototype.stateChanged=function(a,b){};b.prototype.dispose=function(){for(var a=0;a<this._renderedValues.length;a++)this._renderedValues[a].renderedValue.dispose&&
this._renderedValues[a].renderedValue.dispose()};b.prototype.findRenderedValue=function(a){for(var b=0;b<this._renderedValues.length;b++)if(this._renderedValues[b].value===a)return this._renderedValues[b].renderedValue;return null};b.prototype.doRender=function(a,b){if(b==e.DataChangeReason.remove)for(var c=0;c<a.length;c++){var d=this.findRenderedValue(a[c]);d&&(d.dispose&&d.dispose(),d.element.remove())}else b!=e.DataChangeReason.add&&(this._renderedValues=[],this._contentDestination.empty()),this.appendItems(a)};
b.prototype.appendItems=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b],d=this._valueRenderer.render(c,this._contentDestination);this._renderedValues.push({value:c,renderedValue:d})}};return b}();e.RenderListHandler=f;var d=function(b){function a(a,c,d,e){b.call(this,a,c,d,e)}__extends(a,b);a.prototype.createHandler=function(a,b,c,d){if(!a||a.handler&&"render"!==a.handler||a.type&&"list"!==a.type||!a.type&&!this.isList(b))return null;this.fillContentDestination(a,c);this.fillRenderer(a,d,
b);return new f(a.contentDestination,a.renderer)};return a}(e.RenderHandlerFactoryBase);e.RenderListFactory=d;c.Common.JS.ioc.withRegistered(function(b,a,e,f){c.Common.JS.addHandlerFactory(new d(b,a,e,f))},"elementFactory","markupResolver","viewFactory","fetcherFactory")})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
(function(c){(function(e){var f=function(){function d(){for(var b=[],a=0;a<arguments.length-0;a++)b[a]=arguments[a+0];this._items=new c.Common.ArrayList;for(a=0;a<b.length;a++)this._items.add(b[a])}d.prototype.wireWith=function(b){b.addListener(this)};d.prototype.unwireWith=function(b){b.removeListener(this)};d.prototype.valueChanged=function(b,a,c){};d.prototype.stateChanged=function(b,a){for(var c=0;c<this._items.count();c++){var d=this._items.getAt(c);d.isMatched(b,a)&&d.handle(b,a)}};d.prototype.dispose=
function(){this._items.clear()};return d}();e.StateTransitionHandler=f})(c.Binding||(c.Binding={}))})(JohnSmith||(JohnSmith={}));
